
ALTER TABLE calendar_events
  ADD COLUMN event_date_end DATE NOT NULL AFTER event_date,
  ADD COLUMN event_date_occurence int DEFAULT 0 AFTER event_title,
  ADD COLUMN event_date_periodicity int DEFAULT 1 AFTER event_title,
  ADD COLUMN event_date_creation timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP;

ALTER TABLE calendar_portlet
	MODIFY COLUMN date_begin DATE DEFAULT NULL,
	MODIFY COLUMN date_end DATE DEFAULT NULL;

ALTER TABLE calendar_events 
	MODIFY COLUMN event_date DATE NOT NULL;

--
-- Table structure for table calendar_events_occurences
--
	DROP TABLE IF EXISTS calendar_events_occurrences;
	CREATE TABLE calendar_events_occurrences (
		id_occurrence int NOT NULL,
		id_event int NOT NULL,
		id_agenda int NOT NULL,  
		occurrence_date date NOT NULL,
		occurrence_time_start varchar(5) DEFAULT NULL,
		occurrence_time_end varchar(5) DEFAULT NULL,
		occurrence_title varchar(60) NOT NULL,
		occurrence_status varchar(20) DEFAULT NULL,
		PRIMARY KEY  (id_occurrence)
);

--
-- Table structure for table calendar_events_features
--
	DROP TABLE IF EXISTS calendar_events_features;
	CREATE TABLE calendar_events_features (
		id_feature int NOT NULL,
		id_event int NOT NULL,
		feature_description TEXT NOT NULL,
		feature_tags varchar(130) DEFAULT NULL,
		feature_location varchar(60) DEFAULT NULL,
		feature_location_town varchar(60) DEFAULT NULL,
		feature_location_zip varchar(20) DEFAULT NULL,
		feature_location_address varchar(130) DEFAULT NULL,
		feature_map_url varchar(130) DEFAULT NULL,
		feature_link_url varchar(130) DEFAULT NULL,
		document_id int DEFAULT NULL,
		feature_page_url varchar(300) DEFAULT NULL,
		feature_top_event int DEFAULT 0,
		feature_image long varbinary default NULL,
		image_mime_type varchar(100) default NULL,
	  	PRIMARY KEY  (id_feature)
);

--
-- Table structure for table calendar_export_stylesheet
--
	DROP TABLE IF EXISTS calendar_export_stylesheets;
	CREATE TABLE calendar_export_stylesheets (
		id_stylesheet int default 0 NOT NULL,
		description varchar(255),
		file_name varchar(255),
		source long varbinary,
		extension varchar(5),
		PRIMARY KEY (id_stylesheet)
);

--
-- Table structure for table calendar_subscriber_details
--
	DROP TABLE IF EXISTS calendar_subscriber_details;
	CREATE TABLE calendar_subscriber_details (
		id_subscriber INT DEFAULT '0' NOT NULL,
		email VARCHAR(100) DEFAULT NULL,
		PRIMARY KEY (id_subscriber)
);

--
-- Table structure for table calendar_subscriber
--
	DROP TABLE IF EXISTS calendar_subscriber;
	CREATE TABLE calendar_subscriber (
		id_subscriber INT DEFAULT '0' NOT NULL,
		id_agenda INT DEFAULT '0' NOT NULL,
		date_subscription TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
		PRIMARY KEY (id_subscriber, id_agenda)
);

--
-- Table structure for table calendar_category
--
	DROP TABLE IF EXISTS calendar_category;
	CREATE TABLE calendar_category (
		id_category int NOT NULL,
		calendar_category_name varchar(100) NOT NULL,
		description varchar(255) default NULL,
		icon_content long varbinary default NULL,
		icon_mime_type varchar(100) default NULL,
		workgroup_key varchar(50) default NULL,
		PRIMARY KEY (id_category)	
);

--
-- Table structure for table calendar_category_link
--
	DROP TABLE IF EXISTS calendar_category_link;
	CREATE TABLE calendar_category_link (
		id_event int NOT NULL,
		id_category int NOT NULL,
		PRIMARY KEY (id_event,id_category)
);

--
-- Table structure for table calendar_mini_portlet
--
DROP TABLE IF EXISTS calendar_mini_portlet;
CREATE TABLE calendar_mini_portlet
(
	top_event smallint default 0 NOT NULL,
	PRIMARY KEY (top_event)
);

--
-- Dumping data for table calendar_export_stylesheets
--
	INSERT INTO calendar_export_stylesheets (id_stylesheet,description,file_name,source,extension) VALUES 
		(1,'Exportation rss','calendar_rss.xsl',0x3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A3C78736C3A6F7574707574206D6574686F643D2268746D6C22202F3E0D0A090D0A093C78736C3A74656D706C617465206D617463683D226576656E7473223E0D0A090D0A09093C7273732076657273696F6E3D22322E302220786D6C6E733A61746F6D3D22687474703A2F2F7777772E77332E6F72672F323030352F41746F6D223E0D0A09202020203C6368616E6E656C3E0D0A0920202020202020203C7469746C653E43616C656E646172205253533C2F7469746C653E0D0A0920202020202020203C6465736372697074696F6E3E43616C656E646172205253533C2F6465736372697074696F6E3E0D0A0920202020202020203C6C696E6B3E706F7274616C2E6A73703C2F6C696E6B3E090D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226576656E7422202F3E0D0A09202020203C2F6368616E6E656C3E0D0A09093C2F7273733E09202020200D0A09093C2F78736C3A74656D706C6174653E0D0A090D0A09093C78736C3A74656D706C617465206D617463683D226576656E74223E0D0A0920202020202020203C6974656D3E0D0A092020202020202020202020203C7469746C653E3C78736C3A76616C75652D6F662073656C6563743D226576656E742D73756D6D617279222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E3C2F7469746C653E0D0A092020202020202020202020203C6465736372697074696F6E3E3C78736C3A76616C75652D6F662073656C6563743D226576656E742D6465736372697074696F6E222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E3C2F6465736372697074696F6E3E0D0A092020202020202020202020203C707562446174653E3C78736C3A76616C75652D6F662073656C6563743D226576656E742D6372656174696F6E2D64617465222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E3C2F707562446174653E0D0A092020202020202020202020203C6C696E6B3E3C78736C3A76616C75652D6F662073656C6563743D226576656E742D75726C2220202F3E3C2F6C696E6B3E0D0A0920202020202020203C2F6974656D3E0D0A09093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E0D0A,'xml');
	INSERT INTO calendar_export_stylesheets (id_stylesheet,description,file_name,source,extension) VALUES 
		(2,'Exportation format Ical','ics_export_calendar.xsl',0x3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A3C78736C3A6F7574707574206D6574686F643D227465787422200D0A696E64656E743D226E6F222F3E0D0A3C78736C3A7661726961626C65206E616D653D22686561646572223E0D0A424547494E3A5643414C454E4441520D0A56455253494F4E3A322E300D0A582D57522D43414C4E414D453A4167656E64610D0A50524F4449443A2D2F2F4D616972696520646520506172697320496E632F2F6943616C20322E302F2F454E0D0A43414C5343414C453A475245474F5249414E0D0A3C2F78736C3A7661726961626C653E0D0A3C78736C3A7661726961626C65206E616D653D22666F6F746572223E0D0A454E443A5643414C454E44410D0A3C2F78736C3A7661726961626C653E0D0A3C78736C3A74656D706C617465206D617463683D226576656E7473223E09090D0A3C78736C3A636F70792D6F662073656C6563743D222468656164657222202F3E0D0A3C78736C3A6170706C792D74656D706C617465732073656C6563743D226576656E7422202F3E0D0A3C78736C3A636F70792D6F662073656C6563743D2224666F6F74657222202F3E0D0A3C2F78736C3A74656D706C617465203E0D0A3C78736C3A74656D706C617465206D617463683D226576656E74223E0D0A424547494E3A564556454E54090D0A53554D4D4152593A3C78736C3A76616C75652D6F662073656C6563743D226576656E742D73756D6D61727922202F3E0D0A4C4F434154494F4E3A3C78736C3A76616C75652D6F662073656C6563743D226576656E742D6C6F636174696F6E22202F3E0D0A4445534352495054494F4E3A3C78736C3A76616C75652D6F662073656C6563743D226576656E742D6465736372697074696F6E22202F3E0D0A43415445474F524945533A3C78736C3A76616C75652D6F662073656C6563743D226576656E742D63617465676F7269657322202F3E0D0A5354415455533A3C78736C3A76616C75652D6F662073656C6563743D226576656E742D73746174757322202F3E0D0A445453544152543B545A49443D4575726F70652F50617269733A3C78736C3A76616C75652D6F662073656C6563743D226576656E742D6461746522202F3E3C78736C3A696620746573743D226576656E742D646174652D74696D652D737461727420213D20272720223E543C78736C3A76616C75652D6F662073656C6563743D226576656E742D646174652D74696D652D737461727422202F3E30303C2F78736C3A69663E0D0A3C78736C3A696620746573743D226576656E742D646174652D74696D652D656E6420213D20272720223E4454454E443B545A49443D4575726F70652F50617269733A3C78736C3A76616C75652D6F662073656C6563743D226576656E742D6461746522202F3E543C78736C3A76616C75652D6F662073656C6563743D226576656E742D646174652D74696D652D656E6422202F3E30303C2F78736C3A69663E0D0A454E443A564556454E542020202020202020090D0A3C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E,'ics');
	INSERT INTO calendar_export_stylesheets (id_stylesheet,description,file_name,source,extension) VALUES 
		(3,'Exportation xml','xml_export_calendar.xsl',0x3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A3C78736C3A6F7574707574206D6574686F643D22786D6C222076657273696F6E3D22312E30220D0A656E636F64696E673D2269736F2D383835392D312220696E64656E743D22796573222F3E0D0A093C78736C3A74656D706C617465206D617463683D222F223E0D0A09093C78736C3A636F70792D6F662073656C6563743D226576656E747322202F3E0D0A093C2F78736C3A74656D706C617465203E0D0A3C2F78736C3A7374796C6573686565743E0D0A,'xml');

--
-- Dumping data for table core_style
--
INSERT INTO core_style(id_style,description_style,id_portlet_type,id_portal_component) VALUES(1000,'Calendar-DÃ©faut','CALENDAR_PORTLET',0);
INSERT INTO core_style(id_style,description_style,id_portlet_type,id_portal_component) VALUES(1001,'MiniAgenda','MINI_CALENDAR_PORTLET',0);
INSERT INTO core_style(id_style,description_style,id_portlet_type,id_portal_component) VALUES(1002,'Calendar-Organizedevent','CALENDAR_PORTLET',0);

--
-- Dumping data for table core_stylesheet
--
INSERT INTO core_stylesheet(id_stylesheet,description,file_name,source)
	VALUES(1000,'Calendar-Défaut','portlet_calendar.xsl',0x3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A0D0A093C78736C3A706172616D206E616D653D22736974652D70617468222073656C6563743D22736974652D7061746822202F3E0D0A093C78736C3A7661726961626C65206E616D653D22706F72746C65742D6964222073656C6563743D22706F72746C65742F706F72746C65742D696422202F3E0D0A0D0A093C78736C3A74656D706C617465206D617463683D22706F72746C6574223E0D0A09093C64697620636C6173733D22617070656E642D626F74746F6D22203E0D0A0909093C78736C3A63686F6F73653E0D0A090909093C78736C3A7768656E20746573743D226E6F7428737472696E6728646973706C61792D706F72746C65742D7469746C65293D27312729223E0D0A09090909093C683320636C6173733D22706F72746C65742D6261636B67726F756E642D686561646572202D6C75746563652D626F726465722D7261646975732D746F70223E0D0A0909090909093C78736C3A76616C75652D6F662064697361626C652D6F75747075742D6573636170696E673D22796573222073656C6563743D22706F72746C65742D6E616D6522202F3E0D0A09090909093C2F68333E0D0A09090909093C64697620636C6173733D22706F72746C65742D6261636B67726F756E642D636F6E74656E74202D6C75746563652D626F726465722D7261646975732D626F74746F6D22203E0D0A0909090909093C78736C3A6170706C792D74656D706C617465732073656C6563743D2263616C656E6461722D66696C74657265642D6C69737422202F3E0D0A0909090909093C78736C3A746578742064697361626C652D6F75747075742D6573636170696E673D22796573223E0D0A090909090909093C215B43444154415B3C64697620636C6173733D22636C656172223E26233136303B3C2F6469763E5D5D3E0D0A0909090909093C2F78736C3A746578743E0D0A09090909093C2F6469763E0D0A090909093C2F78736C3A7768656E3E0D0A090909093C78736C3A6F74686572776973653E0D0A09090909093C64697620636C6173733D22706F72746C65742D6261636B67726F756E642D636F6E74656E74202D6C75746563652D626F726465722D72616469757322203E0D0A0909090909093C78736C3A6170706C792D74656D706C617465732073656C6563743D2263616C656E6461722D66696C74657265642D6C69737422202F3E0D0A0909090909093C78736C3A746578742064697361626C652D6F75747075742D6573636170696E673D22796573223E0D0A090909090909093C215B43444154415B3C64697620636C6173733D22636C656172223E26233136303B3C2F6469763E5D5D3E0D0A0909090909093C2F78736C3A746578743E0D0A09090909093C2F6469763E0D0A090909093C2F78736C3A6F74686572776973653E0D0A0909093C2F78736C3A63686F6F73653E0D0A09093C2F6469763E20202020202020200D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D2263616C656E6461722D66696C74657265642D6C697374223E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226576656E747322202F3E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D226576656E7473223E202020200D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226576656E7422202F3E200D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D226576656E74223E0D0A09095B0D0A20202020202020203C78736C3A76616C75652D6F662073656C6563743D22646174652D6C6F63616C22202F3E200D0A20202020202020205D0D0A09093C6120687265663D227B24736974652D706174687D3F706167653D63616C656E646172262333383B6167656E64613D7B6167656E64612D69647D262333383B646174653D7B6576656E742D646174657D22207461726765743D225F746F7022207469746C653D22207B6167656E64612D6E616D657D3A7B6576656E742D7469746C657D20223E202020202020202020200D0A0909093C78736C3A76616C75652D6F662073656C6563743D226576656E742D7469746C6522202F3E200D0A09093C2F613E0D0A09093C6272202F3E0D0A093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E0D0A);
INSERT INTO core_stylesheet(id_stylesheet,description,file_name,source)
	VALUES(1001,'Miniagendastylesheet','portlet_mini_calendar.xsl',0x3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A093C78736C3A6F7574707574206D6574686F643D2268746D6C222F3E0D0A093C78736C3A7661726961626C65206E616D653D2275726C223E3C78736C3A76616C75652D6F662073656C6563743D22706F72746C65742F75726C222F3E3C2F78736C3A7661726961626C653E0D0A202020203C78736C3A7661726961626C65206E616D653D22706167652D6964223E3C78736C3A76616C75652D6F662073656C6563743D22706F72746C65742F706167652D6964222F3E3C2F78736C3A7661726961626C653E0D0A093C78736C3A74656D706C617465206D617463683D22706F72746C6574223E0D0A09093C6C696E6B2072656C3D227374796C657368656574222020687265663D226373732F706C7567696E732F63616C656E6461722F63616C656E6461722E6373732220747970653D22746578742F6373732220206D656469613D2273637265656E22202F3E0D0A09090D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D22746F702D6576656E747322202F3E0D0A09093C64697620636C6173733D22706F72746C65742D6261636B67726F756E642D636F6E74656E74202D6C75746563652D626F726465722D7261646975732D626F74746F6D207370616E2D362063616C656E6461722D6D696E69223E0D0A0909093C78736C3A6170706C792D74656D706C617465732073656C6563743D226D6F6E746822202F3E0D0A0909093C78736C3A746578742064697361626C652D6F75747075742D6573636170696E673D22796573223E0D0A090909093C2F78736C3A746578743E0D0A09093C2F6469763E2020200D0A09090909090D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D226D6F6E7468223E0D0A09202020203C7461626C6520636C6173733D2263616C656E6461722D736D616C6C6D6F6E7468222063656C6C73706163696E673D2230223E0D0A20202020202020203C74723E0D0A2020202020202020202020203C746820636C6173733D2263616C656E6461722D736D616C6C6D6F6E74682220636F6C7370616E3D2237223E0D0A202020202020202020202020093C6120636C6173733D226C6566742220687265663D227B2475726C7D7B24706167652D69647D26616D703B6D6F6E74683D70726576223E266C743B266C743B3C2F613E0D0A090909093C78736C3A76616C75652D6F662073656C6563743D226D6F6E74682D6C6162656C222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E0D0A090909093C6120636C6173733D2272696768742220687265663D227B2475726C7D7B24706167652D69647D26616D703B6D6F6E74683D6E657874223E2667743B2667743B3C2F613E0D0A2020202020202020202020203C2F74683E0D0A20202020202020203C2F74723E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B73222F3E090909090D0A09093C2F7461626C653E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B2D73686F72746375747322202F3E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D227765656B73223E200D0A09093C74723E0D0A0909093C78736C3A6170706C792D74656D706C617465732073656C6563743D226461792D6C6162656C22202F3E0D0A09093C2F74723E090D0A09090D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B22202F3E0D0A09090D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D226461792D6C6162656C223E0D0A0909093C746820636C6173733D2263616C656E6461722D736D616C6C6D6F6E7468223E3C78736C3A6170706C792D74656D706C61746573202F3E3C2F74683E0D0A093C2F78736C3A74656D706C6174653E200D0A090D0A093C78736C3A74656D706C617465206D617463683D227765656B223E202020200D0A09093C74723E0D0A0909093C78736C3A6170706C792D74656D706C617465732073656C6563743D22646179222F3E200D0A09093C2F74723E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D22646179223E0D0A09093C78736C3A76616C75652D6F662073656C6563743D226461792D636F6465222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E200D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D227765656B2D73686F727463757473223E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B2D73686F7274637574222F3E200D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D227765656B2D73686F7274637574223E090D0A0909093C696D67206865696768743D2231362220626F726465723D223022202077696474683D22313622207469746C653D224167656E64612220616C743D224167656E646122207372633D22696D616765732F6C6F63616C2F736B696E2F706C7567696E732F63616C656E6461722F6D696E695F63616C656E6461722E706E67222F3E09090D0A090909093C78736C3A746578742064697361626C652D6F75747075742D6573636170696E673D22796573223E0D0A0909090909093C215B43444154415B266E6273703B5D5D3E0D0A090909093C2F78736C3A746578743E0D0A0909093C6120687265663D226A73702F736974652F506F7274616C2E6A73703F706167653D63616C656E64617226616D703B616374696F6E3D646F5F73656172636826616D703B646174655F73746172743D7B7765656B2D73686F72746375742D646174652D73746172747D26616D703B646174655F656E643D7B7765656B2D73686F72746375742D646174652D656E647D26616D703B706572696F643D7B7765656B2D73686F72746375742D706572696F647D223E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D227765656B2D73686F72746375742D6C6162656C222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E3C2F613E090909090D0A090909200D0A09093C62722F3E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D22746F702D6576656E7473223E090D0A093C64697620636C6173733D227370616E2D313522203E0D0A093C6469762069643D22746F702D6576656E742220636C6173733D2267616C6C65727976696577223E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D22746F702D6576656E74222F3E0D0A093C2F6469763E0D0A093C2F6469763E0D0A093C2F78736C3A74656D706C6174653E0D0A093C78736C3A74656D706C617465206D617463683D22746F702D6576656E74223E0D0A09093C64697620636C6173733D2270616E656C223E0D0A09093C696D67207372633D22696D6167653F7265736F757263655F747970653D696D6167655F6576656E7426616D703B69643D7B6576656E742D69647D22202F3E200D0A0909093C64697620636C6173733D2270616E656C2D6F7665726C6179223E0D0A090909093C68343E3C6120687265663D226A73702F736974652F506F7274616C2E6A73703F706167653D63616C656E64617226616D703B616374696F6E3D73686F775F726573756C7426616D703B6576656E745F69643D7B6576656E742D69647D26616D703B6167656E64613D7B6167656E64612D69647D22207461726765743D225F626C616E6B223E3C78736C3A76616C75652D6F662073656C6563743D22746F702D6576656E742D7469746C65222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E3C2F613E3C2F68343E090909090D0A0909093C2F6469763E0D0A09093C2F6469763E0D0A093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E0D0A0D0A092020202020202020202020200D0A202020200D0A202020200D0A202020200D0A0920202020202020200D0A0920202020202020200D0A0920202020202020200D0A);
INSERT INTO core_stylesheet(id_stylesheet,description,file_name,source)
	VALUES(1002,'Calendar-Organizedevent','portlet_calendar_organized_events.xsl',0x3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A0D0A093C78736C3A706172616D206E616D653D22736974652D70617468222073656C6563743D22736974652D7061746822202F3E0D0A093C78736C3A7661726961626C65206E616D653D22706F72746C65742D6964222073656C6563743D22706F72746C65742F706F72746C65742D696422202F3E0D0A0D0A093C78736C3A74656D706C617465206D617463683D22706F72746C6574223E0D0A09093C64697620636C6173733D22617070656E642D626F74746F6D22203E0D0A0909093C64697620636C6173733D22706F72746C65742D6261636B67726F756E642D636F6E74656E74202D6C75746563652D626F726465722D7261646975732D626F74746F6D207370616E2D362063616C656E6461722D6D696E692063616C656E6461722D7365617263682D666C6F61742D6C656674223E0D0A090909093C78736C3A6170706C792D74656D706C617465732073656C6563743D226D6F6E746822202F3E0D0A090909093C78736C3A746578742064697361626C652D6F75747075742D6573636170696E673D22796573223E0D0A09090909093C2F78736C3A746578743E0D0A0909093C2F6469763E200D0A0909093C64697620636C6173733D22706F72746C65742D6261636B67726F756E642D636F6E74656E74202D6C75746563652D626F726465722D7261646975732063616C656E6461722D7365617263682D666C6F61742D6C656674207370616E2D313322203E0D0A090909093C78736C3A6170706C792D74656D706C617465732073656C6563743D2263616C656E6461722D66696C74657265642D6C69737422202F3E0D0A090909093C78736C3A746578742064697361626C652D6F75747075742D6573636170696E673D22796573223E0D0A09090909093C215B43444154415B3C64697620636C6173733D22636C656172223E26233136303B3C2F6469763E5D5D3E0D0A090909093C2F78736C3A746578743E0D0A0909093C2F6469763E0D0A09093C2F6469763E0D0A09093C64697620636C6173733D2263616C656E6461722D636C656172626F7468223E3C2F6469763E20202020202020200D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D226D6F6E7468223E0D0A09202020203C7461626C6520636C6173733D2263616C656E6461722D736D616C6C6D6F6E7468222063656C6C73706163696E673D2230223E0D0A20202020202020203C74723E0D0A2020202020202020202020203C746820636C6173733D2263616C656E6461722D736D616C6C6D6F6E74682220636F6C7370616E3D2237223E0D0A090909093C78736C3A76616C75652D6F662073656C6563743D226D6F6E74682D6C6162656C222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E0D0A2020202020202020202020203C2F74683E0D0A20202020202020203C2F74723E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B73222F3E090909090D0A09093C2F7461626C653E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B2D73686F72746375747322202F3E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D227765656B73223E200D0A09093C74723E0D0A0909093C78736C3A6170706C792D74656D706C617465732073656C6563743D226461792D6C6162656C22202F3E0D0A09093C2F74723E090D0A09090D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B22202F3E0D0A09090D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D226461792D6C6162656C223E0D0A0909093C746820636C6173733D2263616C656E6461722D736D616C6C6D6F6E7468223E3C78736C3A6170706C792D74656D706C61746573202F3E3C2F74683E0D0A093C2F78736C3A74656D706C6174653E200D0A090D0A093C78736C3A74656D706C617465206D617463683D227765656B223E202020200D0A09093C74723E0D0A0909093C78736C3A6170706C792D74656D706C617465732073656C6563743D22646179222F3E200D0A09093C2F74723E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D22646179223E0D0A09093C78736C3A76616C75652D6F662073656C6563743D226461792D636F6465222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E200D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D227765656B2D73686F727463757473223E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227765656B2D73686F7274637574222F3E200D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D227765656B2D73686F7274637574223E090D0A0909093C696D67206865696768743D2231362220626F726465723D223022202077696474683D22313622207469746C653D224167656E64612220616C743D224167656E646122207372633D22696D616765732F6C6F63616C2F736B696E2F706C7567696E732F63616C656E6461722F6D696E695F63616C656E6461722E706E67222F3E09090D0A090909093C78736C3A746578742064697361626C652D6F75747075742D6573636170696E673D22796573223E0D0A0909090909093C215B43444154415B266E6273703B5D5D3E0D0A090909093C2F78736C3A746578743E0D0A0909093C6120687265663D226A73702F736974652F506F7274616C2E6A73703F706167653D63616C656E64617226616D703B616374696F6E3D646F5F73656172636826616D703B646174655F73746172743D7B7765656B2D73686F72746375742D646174652D73746172747D26616D703B646174655F656E643D7B7765656B2D73686F72746375742D646174652D656E647D26616D703B706572696F643D7B7765656B2D73686F72746375742D706572696F647D223E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D227765656B2D73686F72746375742D6C6162656C222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E3C2F613E090909090D0A090909200D0A09093C62722F3E0D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D2263616C656E6461722D66696C74657265642D6C697374223E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226576656E747322202F3E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D226576656E7473223E202020200D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226576656E7422202F3E200D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D226576656E74223E090D0A09093C7020636C6173733D2263616C656E6461722D6F7267616E697A65642D6576656E74223E0D0A0920202020202020203C6120687265663D226A73702F736974652F506F7274616C2E6A73703F706167653D63616C656E64617226616D703B616374696F6E3D73686F775F726573756C7426616D703B6576656E745F69643D7B6576656E742D69647D26616D703B6167656E64613D7B6167656E64612D69647D22207461726765743D225F626C616E6B223E0D0A092020202020202020093C78736C3A76616C75652D6F662073656C6563743D226576656E742D7469746C65222064697361626C652D6F75747075742D6573636170696E673D2279657322202F3E0D0A0920202020202020203C2F613E0D0A20202020202020203C2F703E0D0A0D0A093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E0D0A);

--
-- Dumping data for table core_style_mode_stylesheet
--
INSERT INTO core_style_mode_stylesheet(id_style,id_mode,id_stylesheet) VALUES(1000,0,1000);
INSERT INTO core_style_mode_stylesheet(id_style,id_mode,id_stylesheet) VALUES(1001,0,1001);
INSERT INTO core_style_mode_stylesheet(id_style,id_mode,id_stylesheet) VALUES(1002,0,1002);

--
-- Dumping data for core_portlet_type
--
INSERT INTO core_portlet_type(id_portlet_type,name,url_creation,url_update,home_class,plugin_name,url_docreate,create_script,create_specific,create_specific_form,url_domodify,modify_script,modify_specific,modify_specific_form)
	VALUES('MINI_CALENDAR_PORTLET','calendar.portlet.mini_agenda.name','plugins/calendar/CreatePortletMiniCalendar.jsp','plugins/calendar/ModifyPortletMiniCalendar.jsp','fr.paris.lutece.plugins.calendar.business.portlet.MiniCalendarPortletHome','calendar','plugins/calendar/DoCreatePortletMiniCalendar.jsp','/admin/portlet/script_create_portlet.html','','','plugins/calendar/DoModifyPortletMiniCalendar.jsp','/admin/portlet/script_modify_portlet.html','/admin/plugins/calendar/portlet_modify_mini_calendar.html','');

--
-- Update data for core_admin_right
--
UPDATE core_admin_right SET admin_url='jsp/admin/plugins/calendar/ManageCalendarsMenu.jsp' WHERE id_right='CALENDAR_MANAGEMENT';

--
-- Update data for calendar_events
--
UPDATE calendar_events SET event_date_end = event_date, event_date = event_date, event_date_creation = CURRENT_DATE;

--
-- Insert data for calendar_events_features
--
SET @position = 0;
INSERT INTO calendar_events_features (id_feature, id_event, feature_description)  SELECT @position := @position + 1,calendar_events.id_event, calendar_events.event_title FROM calendar_events;
