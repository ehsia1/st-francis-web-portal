--
-- Dumping data for table core_admin_right
--
INSERT INTO core_admin_right(id_right,name,level_right,admin_url,description,is_updatable,plugin_name,id_feature_group,icon_url,documentation_url)
	VALUES('CALENDAR_MANAGEMENT','calendar.adminFeature.calendar_management.name',1,'jsp/admin/plugins/calendar/ManageCalendars.jsp','calendar.adminFeature.calendar_management.description',0,'calendar',NULL,NULL,NULL);

--
-- Dumping data for table core_portlet_type
--
INSERT INTO core_portlet_type(id_portlet_type,name,url_creation,url_update,home_class,plugin_name,url_docreate,create_script,create_specific,create_specific_form,url_domodify,modify_script,modify_specific,modify_specific_form)
	VALUES('CALENDAR_PORTLET','calendar.portlet.name','plugins/calendar/CreatePortletCalendar.jsp','plugins/calendar/ModifyPortletCalendar.jsp','fr.paris.lutece.plugins.calendar.business.portlet.CalendarPortletHome','calendar','plugins/calendar/DoCreatePortletCalendar.jsp','/admin/portlet/script_create_portlet.html','','','plugins/calendar/DoModifyPortletCalendar.jsp','/admin/portlet/script_modify_portlet.html','/admin/plugins/calendar/portlet_modify_calendar.html','');
INSERT INTO core_portlet_type(id_portlet_type,name,url_creation,url_update,home_class,plugin_name,url_docreate,create_script,create_specific,create_specific_form,url_domodify,modify_script,modify_specific,modify_specific_form)
	VALUES('MINI_CALENDAR_PORTLET','calendar.portlet.mini_agenda.name','plugins/calendar/CreatePortletMiniCalendar.jsp','plugins/calendar/ModifyPortletMiniCalendar.jsp','fr.paris.lutece.plugins.calendar.business.portlet.MiniCalendarPortletHome','calendar','plugins/calendar/DoCreatePortletMiniCalendar.jsp','/admin/portlet/script_create_portlet.html','','','plugins/calendar/DoModifyPortletMiniCalendar.jsp','/admin/portlet/script_modify_portlet.html','/admin/plugins/calendar/portlet_modify_mini_calendar.html','');

--
-- Dumping data for table core_style
--
INSERT INTO core_style(id_style,description_style,id_portlet_type,id_portal_component) VALUES(1200,'Calendar-Défaut','CALENDAR_PORTLET',0);
INSERT INTO core_style(id_style,description_style,id_portlet_type,id_portal_component) VALUES(1201,'MiniAgenda','MINI_CALENDAR_PORTLET',0);
INSERT INTO core_style(id_style,description_style,id_portlet_type,id_portal_component) VALUES(1202,'Calendar-Organizedevent','CALENDAR_PORTLET',0);

--
-- Dumping data for table core_stylesheet
--
INSERT INTO core_stylesheet (id_stylesheet, description, file_name, source) VALUES (1200,'Calendar-Défaut','portlet_calendar.xsl','<?xml version=\"1.0\"?>\r\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n\r\n	<xsl:param name=\"site-path\" select=\"site-path\" />\r\n	<xsl:variable name=\"portlet-id\" select=\"portlet/portlet-id\" />\r\n\r\n	<xsl:template match=\"portlet\">\r\n	\r\n		\r\n	<xsl:variable name=\"device_class\">\r\n	<xsl:choose>\r\n		<xsl:when test=\"string(display-on-small-device)=\'0\'\">hidden-phone</xsl:when>\r\n		<xsl:otherwise></xsl:otherwise>\r\n	</xsl:choose>\r\n	</xsl:variable>\r\n	\r\n		<div class=\"append-bottom  {$device_class}\">\r\n			<xsl:choose>\r\n				<xsl:when test=\"not(string(display-portlet-title)=\'1\')\">\r\n					<h3 class=\"portlet-background-header -lutece-border-radius-top\">\r\n						<xsl:value-of disable-output-escaping=\"yes\" select=\"portlet-name\" />\r\n					</h3>\r\n					<div class=\"portlet-background-content -lutece-border-radius-bottom\" >\r\n						<xsl:apply-templates select=\"calendar-filtered-list\" />\r\n						<xsl:text disable-output-escaping=\"yes\">\r\n							<![CDATA[<div class=\"clear\">&#160;</div>]]>\r\n						</xsl:text>\r\n					</div>\r\n				</xsl:when>\r\n				<xsl:otherwise>\r\n					<div class=\"portlet-background-content -lutece-border-radius\" >\r\n						<xsl:apply-templates select=\"calendar-filtered-list\" />\r\n						<xsl:text disable-output-escaping=\"yes\">\r\n							<![CDATA[<div class=\"clear\">&#160;</div>]]>\r\n						</xsl:text>\r\n					</div>\r\n				</xsl:otherwise>\r\n			</xsl:choose>\r\n		</div>        \r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"calendar-filtered-list\">\r\n		<xsl:apply-templates select=\"events\" />\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"events\">    \r\n		<xsl:apply-templates select=\"event\" /> \r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"event\">\r\n		[\r\n        <xsl:value-of select=\"date-local\" /> \r\n        ]\r\n		<a href=\"{$site-path}?page=calendar&#38;agenda={agenda-id}&#38;date={event-date}\" target=\"_top\" title=\" {agenda-name}:{event-title} \">          \r\n			<xsl:value-of select=\"event-title\" /> \r\n		</a>\r\n		<br />\r\n	</xsl:template>\r\n</xsl:stylesheet>\r\n');
INSERT INTO core_stylesheet (id_stylesheet, description, file_name, source) VALUES (1201,'Miniagendastylesheet','portlet_mini_calendar.xsl','<?xml version=\"1.0\"?>\r\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n	<xsl:output method=\"html\"/>\r\n	<xsl:variable name=\"url\"><xsl:value-of select=\"portlet/url\"/></xsl:variable>\r\n    <xsl:variable name=\"page-id\"><xsl:value-of select=\"portlet/page-id\"/></xsl:variable>\r\n	<xsl:template match=\"portlet\">\r\n		<link rel=\"stylesheet\"  href=\"css/plugins/calendar/calendar.css\" type=\"text/css\"  media=\"screen\" />\r\n		\r\n		<xsl:apply-templates select=\"top-events\" />\r\n		\r\n	<xsl:variable name=\"device_class\">\r\n	<xsl:choose>\r\n		<xsl:when test=\"string(display-on-small-device)=\'0\'\">hidden-phone</xsl:when>\r\n		<xsl:otherwise></xsl:otherwise>\r\n	</xsl:choose>\r\n	</xsl:variable>\r\n\r\n		<div class=\"portlet-background-content {$device_class} -lutece-border-radius-bottom span-6 calendar-mini\">\r\n			<xsl:apply-templates select=\"month\" />\r\n			<xsl:text disable-output-escaping=\"yes\">\r\n				</xsl:text>\r\n			<xsl:apply-templates select=\"events\" />\r\n		</div>   					\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"month\">\r\n	    <table class=\"calendar-smallmonth\" cellspacing=\"0\">\r\n        <tr>\r\n            <th class=\"calendar-smallmonth\" colspan=\"7\">\r\n            	<a class=\"left\" href=\"{$url}{$page-id}&amp;month=prev\">&lt;&lt;</a>\r\n				<xsl:value-of select=\"month-label\" disable-output-escaping=\"yes\" />\r\n				<a class=\"right\" href=\"{$url}{$page-id}&amp;month=next\">&gt;&gt;</a>\r\n            </th>\r\n        </tr>\r\n		<xsl:apply-templates select=\"weeks\"/>				\r\n		</table>\r\n		<xsl:apply-templates select=\"week-shortcuts\" />\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"weeks\"> \r\n		<tr>\r\n			<xsl:apply-templates select=\"day-label\" />\r\n		</tr>	\r\n		\r\n		<xsl:apply-templates select=\"week\" />\r\n		\r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"day-label\">\r\n			<th class=\"calendar-smallmonth\"><xsl:apply-templates /></th>\r\n	</xsl:template> \r\n	\r\n	<xsl:template match=\"week\">    \r\n		<tr>\r\n			<xsl:apply-templates select=\"day\"/> \r\n		</tr>\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"day\">\r\n		<xsl:value-of select=\"day-code\" disable-output-escaping=\"yes\" /> \r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"week-shortcuts\">\r\n		<xsl:apply-templates select=\"week-shortcut\"/> \r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"week-shortcut\">	\r\n			<img height=\"16\" border=\"0\"  width=\"16\" title=\"Agenda\" alt=\"Agenda\" src=\"images/local/skin/plugins/calendar/mini_calendar.png\"/>		\r\n				<xsl:text disable-output-escaping=\"yes\">\r\n						<![CDATA[&nbsp;]]>\r\n				</xsl:text>\r\n			<a href=\"jsp/site/Portal.jsp?page_id={$page-id}&amp;date={week-shortcut-date-start}&amp;date_end={week-shortcut-date-end}\">\r\n			<xsl:value-of select=\"week-shortcut-label\" disable-output-escaping=\"yes\" /></a>				\r\n		<br/>\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"top-events\">	\r\n	<div class=\"span-15\" >\r\n	<div id=\"top-event\" class=\"galleryview\">\r\n		<xsl:apply-templates select=\"top-event\"/>\r\n	</div>\r\n	</div>\r\n	</xsl:template>\r\n	<xsl:template match=\"top-event\">\r\n		<div class=\"panel\">\r\n			<img src=\"image?resource_type=image_event&amp;id={event-id}\" /> \r\n			<div class=\"panel-overlay\">\r\n				<h4><a href=\"jsp/site/Portal.jsp?page=calendar&amp;action=show_result&amp;event_id={event-id}&amp;agenda={agenda-id}\" target=\"_blank\"><xsl:value-of select=\"top-event-title\" disable-output-escaping=\"yes\" /></a></h4>				\r\n			</div>\r\n		</div>\r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"events\">\r\n		<br/>\r\n		<xsl:apply-templates select=\"event\" /> \r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"event\">\r\n	<div>\r\n		[<xsl:value-of select=\"date\" />\r\n		<xsl:if test=\"date-end != \'\'\">\r\n			-&#160;<xsl:value-of select=\"date-end\" />\r\n		</xsl:if>]\r\n		<span class = \"calendar-event-list-header\">\r\n			<xsl:value-of select=\"event-title\" /> \r\n		</span>\r\n		<xsl:if test=\"not(event-datetime-begin=\'\')\">\r\n			-\r\n			<xsl:value-of select=\"event-datetime-begin\" /> \r\n		</xsl:if> \r\n		:\r\n		<a href=\"jsp/site/Portal.jsp?page=calendar&amp;action=show_result&amp;event_id={event-id}\" target=\"_blank\">\r\n		 	<xsl:value-of select=\"event-description\" /> \r\n		</a>\r\n	</div>\r\n	</xsl:template>\r\n	\r\n</xsl:stylesheet>\r\n');
INSERT INTO core_stylesheet (id_stylesheet, description, file_name, source) VALUES (1202,'Calendar-Organizedevent','portlet_calendar_organized_events.xsl','<?xml version=\"1.0\"?>\r\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n\r\n	<xsl:param name=\"site-path\" select=\"site-path\" />\r\n	<xsl:variable name=\"portlet-id\" select=\"portlet/portlet-id\" />\r\n\r\n	<xsl:template match=\"portlet\">\r\n	\r\n	<xsl:variable name=\"device_class\">\r\n	<xsl:choose>\r\n		<xsl:when test=\"string(display-on-small-device)=\'0\'\">hidden-phone</xsl:when>\r\n		<xsl:otherwise></xsl:otherwise>\r\n	</xsl:choose>\r\n	</xsl:variable>\r\n\r\n		<div class=\"{$device_class} append-bottom\" >\r\n			<div class=\"portlet-background-content -lutece-border-radius-bottom span-6 calendar-mini calendar-search-float-left\">\r\n				<xsl:apply-templates select=\"month\" />\r\n				<xsl:text disable-output-escaping=\"yes\">\r\n					</xsl:text>\r\n			</div> \r\n			<div class=\"portlet-background-content -lutece-border-radius calendar-search-float-left span-13\" >\r\n				<xsl:apply-templates select=\"calendar-filtered-list\" />\r\n				<xsl:text disable-output-escaping=\"yes\">\r\n					<![CDATA[<div class=\"clear\">&#160;</div>]]>\r\n				</xsl:text>\r\n			</div>\r\n		</div>\r\n		<div class=\"calendar-clearboth\"></div>        \r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"month\">\r\n	    <table class=\"calendar-smallmonth\" cellspacing=\"0\">\r\n        <tr>\r\n            <th class=\"calendar-smallmonth\" colspan=\"7\">\r\n				<xsl:value-of select=\"month-label\" disable-output-escaping=\"yes\" />\r\n            </th>\r\n        </tr>\r\n		<xsl:apply-templates select=\"weeks\"/>				\r\n		</table>\r\n		<xsl:apply-templates select=\"week-shortcuts\" />\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"weeks\"> \r\n		<tr>\r\n			<xsl:apply-templates select=\"day-label\" />\r\n		</tr>	\r\n		\r\n		<xsl:apply-templates select=\"week\" />\r\n		\r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"day-label\">\r\n			<th class=\"calendar-smallmonth\"><xsl:apply-templates /></th>\r\n	</xsl:template> \r\n	\r\n	<xsl:template match=\"week\">    \r\n		<tr>\r\n			<xsl:apply-templates select=\"day\"/> \r\n		</tr>\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"day\">\r\n		<xsl:value-of select=\"day-code\" disable-output-escaping=\"yes\" /> \r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"week-shortcuts\">\r\n		<xsl:apply-templates select=\"week-shortcut\"/> \r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"week-shortcut\">	\r\n			<img height=\"16\" border=\"0\"  width=\"16\" title=\"Agenda\" alt=\"Agenda\" src=\"images/local/skin/plugins/calendar/mini_calendar.png\"/>		\r\n				<xsl:text disable-output-escaping=\"yes\">\r\n						<![CDATA[&nbsp;]]>\r\n				</xsl:text>\r\n			<a href=\"jsp/site/Portal.jsp?page=calendar&amp;action=do_search&amp;date_start={week-shortcut-date-start}&amp;date_end={week-shortcut-date-end}&amp;period={week-shortcut-period}\">\r\n			<xsl:value-of select=\"week-shortcut-label\" disable-output-escaping=\"yes\" /></a>				\r\n			 \r\n		<br/>\r\n	</xsl:template>\r\n	\r\n	<xsl:template match=\"calendar-filtered-list\">\r\n		<xsl:apply-templates select=\"events\" />\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"events\">    \r\n		<xsl:apply-templates select=\"event\" /> \r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"event\">	\r\n		<p class=\"calendar-organized-event\">\r\n	        <a href=\"jsp/site/Portal.jsp?page=calendar&amp;action=show_result&amp;event_id={event-id}&amp;agenda={agenda-id}\" target=\"_blank\">\r\n	        	<xsl:value-of select=\"event-title\" disable-output-escaping=\"yes\" />\r\n	        </a>\r\n        </p>\r\n\r\n	</xsl:template>\r\n</xsl:stylesheet>\r\n');

--
-- Dumping data for table core_style_mode_stylesheet
--
INSERT INTO core_style_mode_stylesheet(id_style,id_mode,id_stylesheet) VALUES(1200,0,1200);
INSERT INTO core_style_mode_stylesheet(id_style,id_mode,id_stylesheet) VALUES(1201,0,1201);
INSERT INTO core_style_mode_stylesheet(id_style,id_mode,id_stylesheet) VALUES(1202,0,1202);

--
-- Init  table core_admin_role
--
INSERT INTO core_admin_role (role_key,role_description) VALUES ('calendar_manager', 'Calendar management');

--
-- Init  table core_admin_role_resource
--
INSERT INTO core_admin_role_resource (rbac_id,role_key,resource_type,resource_id,permission) VALUES (250,'calendar_manager','CALENDAR','*','*');

--
-- Init  table core_user_role
--
INSERT INTO core_user_role (role_key,id_user) VALUES ('calendar_manager',1);

--
-- Init  table core_admin_dashboard
--
INSERT INTO core_admin_dashboard(dashboard_name, dashboard_column, dashboard_order) VALUES('calendarAdminDashboardComponent', 1, 1);

--
-- Init  table core_dashboard
--
INSERT INTO core_dashboard(dashboard_name, dashboard_column, dashboard_order) VALUES('CALENDAR', 3, 1);
